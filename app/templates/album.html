{% extends "base.html" %}
{% block content %}
    <h1>ALBUM</h1>

       {% if logged_in %}
      This only shows up if you are logged in!
      {% include "navbar.html" %}
    {% endif %}


    {% if edit  %}
      Edit user access to this album
      <table class="table table-bordered table-striped" >
        <tr>
          <td> Access </td>
          <td>
            <form action="" method="POST">
              <input type="radio" name="access" id="album_edit_public_radio" value="private"> Private </input>
              <input type="radio" name="access" id="album_edit_private_radio" value="public"> Public </input>
              <input type="hidden" name="op" value="access" />
              <input type="hidden" name="albumid" value="{{albumid}}" />
              <input type="submit" name="submit" id="album_edit_access_submit" value="Submit Change" />
            </form>
          </td>
        </tr>
          {% for user in access_list %}
          <tr>
            <td> {{user.username}} </td>
            <td>
              <form action="" method="POST">
                <input type="hidden" name="op" value="revoke" />
                <input type="hidden" id="album_edit_revoke_{{user.username}}" name="username" value="{{user.username}}" />
                <input type="hidden" name="albumid" value={{albumid}} />
                <input type="submit" name="submit" value="Revoke"/>
              </form>
            </td>
          </tr>
        {% endfor %}
        <tr>
          <td>
            <form action="" method="POST">
              <input id="album_edit_grant_input" name="username" type="text" value="" />
              <input type="hidden" name="op" value="grant" />
              <input type="hidden" name="albumid" value={{albumid}} />
              <input type="submit" name="submit" id="album_edit_grant_submit" value="Grant"/>
            </form>
          </td>
        </tr>
        {% if not public %}
        </table>
        {% endif %}
      <form action="" method="POST" enctype="multipart/form-data">
        <input type="hidden" name="albumid" value="{{albumid}}" />
        <input type="hidden" name="op" value="add" />
        <input type="file" name="file" id="file_input" />
        <input type="submit" value="Upload" id="file_submit" />
      </form>
    {% endif %}

    <table class="table table-bordered table-striped" >
    <tr>
      <td> PicID </td> <td> Image </td>
      {% if edit %}
        <td> Delete </td>
      {% endif %}
    </tr>
    {% for value in data %}
      <tr>
        <td> <a id="pic_{{value.picid}}_link" href="{{ url_for('pic.pic_route', id = value.picid) }}"> Pic</td>
        <td> <img src="/{{image_dir}}{{value.picid}}.{{value.format}}" height="150" width="150"> </td>
        {% if edit %}
          <td>
            <form action="" method="POST" >
            <input type="hidden" name="albumid" value="{{albumid}}" />
            <input type="hidden" name="picid" value="{{value.picid}}" />
            <input type="hidden" name="op" value="delete" />
            <input type="submit" id="delete_pic_{{value.picid}}" value="Delete" />
            </form>
          </td>
        {% endif %}
      </tr>
    {% endfor %}
    </table>
    {% if not edit %}
    <a href="{{ url_for('album.album_edit_route', id = albumid) }}"> Edit {{title}} <a/>
    {% endif %}

{% endblock %}
